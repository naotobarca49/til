# 現場Rails Chapter4-2

・データには、想定される「内容の範囲」がある。例えば、あるカラムの値が常に数値なのかどうか、値が入らないことがあるのか、といったことである。
こうした「内容の範囲」の中には、データベースで定義することで、そぐわない値が格納されないようにできるものがある。
データ型
NOT NULL制約
文字列カラムの長さを指定する
ユニークインデックス

・データベーステーブルのカラムの値としてNULLを格納する必要がない場合は、NOT NULL制約をつけることで、物理的にNULLを保存できないようにしてくれる。そのため、アプリケーションにおいて、あるモデルの属性の値が必ず入ることを期待している場合には、カラムにNOT NULL制約をつけておくべき。

・データベースにおけるNULLは「無い」ことを示す値で、Rubyのnilに対応する。

・limitオプションを使用することで、必要以上に長いデータが保存されることを防ぐことができる。

・add_columnとは異なり、change_columnではバージョンを戻す際の処理を、バージョンを上げる際のコードから自動生成できない。

・あるカラムのデータが、全レコード内で一位である場合には、データベースにユニークインデックスを作成することで、一意性が壊されるのを防ぐことができる。
ユニークインデックスを作成すれば、重複した値がデータベースに存在する状態になることを確実に防ぐことができる。
なおデータベースではNULL同士は常に異なる値だとみなされることに注意する必要がある。その為、ユニークインデックスを作成しているカラムの値がNULLのレコードは複数存在することができる。

・マイグレーションの適用には、テーブル作成時にオプションを付与する方法と、後で特定のカラムに対してオプションを付与する２通りの方法がある。
