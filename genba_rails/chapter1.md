# 現場Rails Chapter1 メモ

・Rubyのようなオブジェクト思考のプログラミング言語では、意味的な共通正のあるデータを１つのオブジェクトに集約して扱えるようにクラスを作る。

・メソッドが呼ばれたときに帰ってくる値のことを「返り値（または戻り値）」と呼ぶ。returnを使用して明示的に指定された値や、メソッド内で最後に評価された値がメソッドの返り値となる。一般的には、メソッドの途中でメソッドを抜けたい時にreturnを使用する。メソッドの最後で返り値を指定する場合はreturnを使用しないことが多い。

・インスタンス変数は、オブジェクトが抱えている変数です。インスタンス変数に代入したデータは、インスタンス変数を抱えているオブジェクトが存在する限り、オブジェクトとともに存在し続ける。インスタンス変数は、オブジェクトのメソッドの中から利用可能な一方で、オブジェクトの外側から直接利用することは基本的にできない。

・インスタンス変数に代入するようなメソッドをセッターと呼ぶ。対して、インスタンス変数を内容を参照するためのメソッドをゲッターと呼ぶ。

・ローカル変数は、その場限りの一時的な変数。例えば、メソッドないで定義したローカル変数はそのメソッドの中でしか使うことができず、他のメソッドからは使うことができない。

・インスタンス変数は、オブジェクトの保持する変数。オブジェクトのどのメソッド内からも利用できる。インスタンス変数はオブジェクトに抱えられたデータである。

・一般的にオブジェクトが抱えるデータのことを「属性(Attribute)」と呼ぶことがある。インスタンス変数と属性はとてもよく似た概念だが、必ずしも同じではない。
attr_accessorによって機械的なコードをプログラマが書かなくても済むようにしている。attr_readerを使うとゲッターだけ。attr_writeを使うとセッターだけ。

・unlessは偽の時に処理を実行する。elsifはなくelseのみ使用できる。unlessで表現できることは全てifで表現できる。unlessとelseを併用するとコードが見づらくなるのでelseを使用するときはifがいい。

・後置ifを使用した場合は1行分の処理しか記述できない。処理が一行で済む単純なケースで使用される。

・Rubyのオブジェクトをnewメソッドで生成するときは、そのオブジェクトのinitializeというメソッドが実行される。initializeに引数を取るクラスのオブジェクトを作成するときは、newに対応する引数を渡す。

・privateメソッドは絶対に外部から呼び出されないようにする仕組みではなく、外部に公開する気がないことを表明する仕組みと考えると良い。

・メソッドを呼び出す際に、引数の意味がわからないと不便な場合がある。そういったときにキーワード引数を使用する。引数を意味づけとともに渡すことができるのがキーワード引数である。また引数を渡す順序が逆でもいい。
引数のデフォルト値がtrueであれば、falseにしたいフラグだけを書くこともできる。必ずデフォルト値をつけず、必ず値を指定させるようにすることもできる。

・親クラスが持つメソッドの処理を、子クラスに書かれた処理で上書きすることをオーバーライドという。

・nilガード number ||= 10 　絶対にnilを返すことはない

・ボッチ演算子&.はレシーバがnilであってもエラーが発生しない。

・オブジェクトの作成時に引数を渡したい場合はinitializeメソッドを定義しなければならない。attr_accessorだけではダメである。

・initializeメソッドはオブジェクトを作成するときに呼び出されるが、直接User.initializeのように呼び出すことはできない。

・rescue_fromでは特定の例外を捕捉し、その後の挙動を設定することができます。
例えば、下記の様に記載すると、ActiveRecord::RecordNotFoundエラーが発生した場合に404ページを表示する様にできます。

rescue_from ActiveRecord::RecordNotFound do |exception|
 logger.error exception.message
 render_404
end

def render_404
 404ページを表示
end

