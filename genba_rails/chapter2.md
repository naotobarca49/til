# 現場Rails Chapter2 メモ

・rails new scaffold_app -d postgresql
上記の -d オプションでデータベースの指定ができる。オプションがないとSQLite3用のファイルが生成されるので注意する必要がある。データベースの種類はアプリケーションを作成した後で変更することができる。

・bin/rails コマンドはアプリケーションのルートディレクトリ直下のbinディレクトリにあるrailsというスクリプトを呼び出している。このスクリプトを利用すると「bundle exec rails 」として実行した時と同様に、Gemfile通りのgem を利用できる環境状でrailsコマンドを実行することができる。

・Railsは標準のHTTPサーバとしてPumaを採用している。Pumaは広く使用されており、Railsの機能を利用する上での不足はない。開発環境としても問題になることはまずない。

・作成「Create」, 読み出し「Read」, 更新「Update」, 削除「Delete」のことをCRUDという。

・Modelでは親クラスを通じてデータベースとやりとりするための様々な機能を備えている。ここにメソッド等を書いて、任意の処理を自由に追加していくことができる。

・オブジェクトとリレーショナルデータベースを対応づけ、便利に利用することのできる機能をO/Rマッピングという。（Object-relational mapping）

・ビューで利用できる便利な機能のことを「ヘルパーメソッド」と呼ぶ。

・<%= yield %>の部分にアクションに対応するビューテンプレートファイルの実行結果が埋め込まれるようになる。

・database.ymlはデータベースと接続するための設定ファイルです。YAMLという形式で記述される。この中ではdevelopment, test, productionという３種類の環境用に、それぞれデータベースの接続に必要な設定が記述されている。

・adapter・・・データベースの接続に使用するアダプタの名前を指定する。アダプタには各データベースに対応するsqlite3、postgresql、mysql、oracle_enhancedなどがある。
encoding・・・文字こーど
pool・・・コネクション数の上限
database・・・データベース名
username・・・データベースに接続するユーザー名
password・・・データベースに接続するユーザーのパスワード
host・・・データベースが動作しているホスト名またはIPアドレス

・プロジェクト直下に例えばexample.ymlに以下のようなファイルを作成する。これはrails consoleで YAML.load_file(‘./example.yml’)と叩くことで読み込める。

animal: &animal
  cat: 'ネコ'
  dog: 'イヌ'

animal_shop_1:
  <<: *animal
  hamster: 'ハムスター'

animal_shop_2:
  <<: *animal
  parrot: 'オウム'

=> {"animal"=>{"cat"=>"ネコ", "dog"=>"イヌ"}, "animal_shop_1"=>{"cat"=>"ネコ", "dog"=>"イヌ", "hamster"=>"ハムスター"}, "animal_shop_2"=>{"cat"=>"ネコ", "dog"=>"イヌ", "parrot"=>"オウム"}}
# このように返る

・MVCとは、UIを持つソフトウェアのアーキテクチャの一種です。要は、ソフトウェアをどのように構造するかについての考え方のパターンの１つということである。

・Controllerでは、ModelとViewを統合的に管理する。データに関するアプリケーション特有の処理に関してはModelに記載するのが一般的で、Controllerに全ての、アプリケーション特有の処理を記載するわけでは無いので、間違いです。ビジネスロジックとは「システムのコアの部分」とか「システムの目的になる処理をするところ」といった説明も正しいとは思います。
